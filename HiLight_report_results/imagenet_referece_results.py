import matplotlib.pyplot as plt


# - Below are all the rerun results with threshold of 0.1. TH = 1 proved to be too high to obtain meaning ful results.

# Command for running gen_diff_mod.py
# KERAS_BACKEND=tensorflow python gen_diff_mod.py blackout parameters 
# - Note: parameters is a variable that is specified in each result below

# Baseline Random, up to 20 blackouts per image
# - Parameters: 1 1 250 20 20 0.1
# - Diffs: 19/20
# - Size: 30x30
# - Blackouts: 81
# - Inner execution time (Milliseconds): 17.5
# - Total execution time (Milliseconds): 1328932.073

random_20 = [57.721, 59.718, 61.156, 62.104, 63.444, 64.704, 65.864, 66.579, 67.155, 67.940, 68.665, 69.180, 69.637, 69.845, 70.259, 71.227, 71.605, 71.886, 72.151, 72.151]

random_20_run_2 = [57.648, 60.097, 61.588, 63.444, 64.562, 65.725, 67.435, 68.986, 69.574, 70.517, 70.786, 71.134, 71.134, 71.426, 71.722, 71.932, 72.067, 72.067, 72.228, 72.228]
# diffs: 17, time: 1889395.639, blackouts: 136

random_20_run_3 = [58.906, 60.938, 62.637, 63.985, 65.199, 66.003, 66.972, 67.663, 69.116, 69.510, 69.959, 70.440, 70.752, 70.986, 71.184, 71.622, 71.928, 72.290, 72.472, 72.618]
# diffs: 20, time: 1512551.768, blackouts: 111

random_20_run_4 = [57.753, 61.279, 62.517, 64.561, 65.470, 66.433, 67.312, 68.771, 69.462, 69.937, 70.433, 70.903, 71.095, 71.390, 71.681, 72.147, 72.225, 72.445, 72.445, 72.584]
# diffs: 19, time: 1380256.516, blackouts: 98

random_20_run_5 = [57.329, 59.511, 61.019, 62.462, 63.694, 64.475, 66.156, 67.305, 67.810, 68.226, 69.708, 70.275, 71.803, 72.293, 72.715, 73.009, 73.252, 73.478, 73.722, 73.900]
# diffs: 20, time: 1276461.631, blackouts: 90

random_20_run_6 = [57.511, 59.531, 62.412, 64.373, 65.804, 67.180, 67.966, 68.621, 69.435, 70.097, 70.331, 70.579, 70.972, 71.252, 71.749, 72.210, 72.397, 72.564, 72.564, 72.703]
# diffs: 19, time: 1369970.163, blackouts: 99

random_20_run_7 = [57.655, 59.499, 60.912, 62.140, 63.398, 64.878, 65.908, 66.919, 68.148, 68.740, 69.147, 69.785, 70.553, 70.970, 71.272, 71.922, 72.238, 72.647, 72.859, 72.960]
# diffs: 20, time: 985751.118, blackouts: 65

random_20_run_8 = [57.500, 60.051, 62.636, 64.089, 65.258, 66.035, 66.695, 67.501, 68.447, 68.867, 69.634, 69.920, 70.193, 70.655, 71.207, 71.356, 71.479, 71.549, 71.735, 71.880]
# diffs: 20, time: 1261912.603, blackouts: 90

random_20_run_9 = [57.309, 59.260, 60.502, 61.900, 62.844, 63.729, 64.538, 65.357, 66.099, 67.606, 68.887, 69.340, 70.012, 70.492, 70.682, 70.821, 70.958, 71.458, 71.458, 71.580]
# diffs: 19, time: 2097107.719, blackouts: 165

random_20_run_10 = [57.537, 60.410, 62.063, 63.589, 64.625, 65.422, 66.029, 68.175, 68.953, 69.715, 70.168, 70.614, 70.942, 71.350, 71.653, 71.821, 72.292, 72.671, 72.774, 72.944]
# diffs: 20, time: 1610562.215, blackouts: 114

# Baseline Random, 1 blackout per image
# - Parameters: 1 1 250 20 20 0.1
# - Size: 30x30
# - Blackouts: 20
# - Inner execution time (Milliseconds): 4.448
# - Total execution time (Milliseconds): 422405.285

random_1 = [57.138, 57.138, 57.138, 57.138, 59.411, 59.411, 62.042, 62.042, 62.042, 62.042, 63.971, 63.971, 63.971, 65.255, 65.854, 66.753, 66.753, 67.359, 68.180, 68.858] # 10 diffs

random_1_run_2 = [0.000, 0.000, 0.000, 57.497, 57.497, 60.914, 60.914, 62.713, 64.604, 65.526, 65.526, 65.526, 65.526, 65.526, 65.526, 65.526, 66.587, 67.404, 67.404, 67.404] # 7 diffs

random_1_run_3 = [0.000, 58.620, 58.620, 60.910, 60.910, 60.910, 63.396, 63.396, 63.396, 63.396, 63.396, 64.656, 64.656, 64.656, 65.825, 65.825, 66.733, 66.733, 66.733, 66.733] # 6 diffs

# HiLight, up to 20 blackouts per image
# - Parameters: 1 1 250 20 20 0.1
# - Diffs: 20/20
# - Size: 30x30
# - Blackouts: 34
# - Inner execution time (Milliseconds): 2334.81
# - Total execution time (Milliseconds): 680410.46

hilight_20 = [57.428, 60.200, 61.837, 63.452, 64.687, 65.635, 66.826, 67.582, 68.140, 68.674, 68.970, 69.176, 69.986, 70.215, 70.613, 70.717, 70.809, 70.972, 71.191, 71.606]

hilight_20_run_2 = [55.714, 59.141, 60.929, 63.081, 64.054, 65.154, 65.623, 66.358, 66.632, 66.822, 67.297, 67.484, 67.750, 68.185, 68.606, 68.865, 69.111, 69.464, 69.584, 69.724] 
# diffs: 20, time: 927943.855, blackouts: 58

hilight_20_run_3 = [57.377, 59.727, 61.481, 63.039, 64.265, 65.449, 65.935, 66.654, 67.412, 68.261, 68.513, 68.813, 69.052, 69.272, 69.376, 69.465, 69.596, 69.666, 70.175, 70.347]
# diffs: 20, time: 881757.976, blackouts: 54

hilight_20_run_4 = [58.224, 60.100, 61.475, 62.922, 64.283, 64.943, 66.006, 67.013, 67.615, 67.906, 68.315, 68.569, 68.808, 68.929, 69.424, 69.571, 69.655, 69.797, 69.928, 70.133]
# diffs: 20, time: 956031.02, blackouts: 58

hilight_20_run_5 = [57.917, 59.584, 61.644, 62.558, 63.581, 65.130, 65.774, 66.793, 67.177, 67.775, 68.208, 68.558, 69.081, 69.391, 69.831, 70.068, 70.359, 70.513, 70.513, 70.719]
# diffs: 20, time: 733391.228, blackouts: 35

hilight_20_run_6 = [56.770, 59.970, 61.883, 63.395, 64.584, 65.011, 66.468, 67.160, 67.508, 67.937, 68.186, 68.423, 68.423, 68.595, 68.829, 69.279, 69.410, 69.500, 69.849, 70.219]
# diffs: 20, time: 1001108.861, blackouts: 63

hilight_20_run_7 = [57.672, 60.260, 61.880, 63.067, 64.167, 65.505, 66.182, 67.089, 67.974, 68.308, 68.972, 69.405, 69.610, 69.840, 70.012, 70.221, 70.588, 70.837, 71.025, 71.251]
# diffs: 20, time: 725705.3, blackouts: 34

hilight_20_run_8 = [58.185, 60.791, 62.341, 63.585, 64.663, 65.372, 65.994, 66.501, 66.719, 67.300, 68.021, 68.460, 68.654, 69.233, 69.586, 69.861, 70.094, 70.487, 70.487, 70.709]
# diffs: 20, time: 1029543.795, blackouts: 51

# HiLight, 1 blackout per image
# - Parameters: 1 1 250 20 1 0.1
# - Size: 30x30
# - Blackouts: 20
# - Inner execution time (Milliseconds): 1252.292
# - Total execution time (Milliseconds): 408131.807

hilight_1 = [57.636, 60.124, 60.124, 60.124, 60.124, 60.124, 62.148, 62.148, 63.792, 64.876, 64.876, 64.876, 64.876, 64.876, 65.962, 66.746, 66.746, 66.746, 66.746, 66.746] # 7 diffs

hilight_1_run_2 = [0.000, 0.000, 0.000, 0.000, 57.799, 57.799, 60.554, 60.554, 63.248, 64.501, 65.787, 66.586, 66.586, 66.586, 67.395, 68.271, 68.990, 68.990, 69.514, 70.043] # 11 diffs

hilight_1_run_3 = [57.229, 57.229, 60.076, 60.076, 60.076, 60.076, 60.076, 60.076, 62.621, 64.047, 65.219, 66.298, 67.157, 67.712, 67.712, 67.712, 67.712, 68.238, 68.238, 68.238] # 9 diffs

# Command for running gen_diff_mod.py
# KERAS_BACKEND=tensorflow python gen_diff_mod.py blackout 1 0.1 250 20 1 0 -- THRESHOLD 0 
# The below results use these parameters unless otherwise stated

# Baseline Random
# - Diffs: 8/20
# - Size: 30x30
# - Blackouts: 20
# - Inner execution time (Milliseconds): 4.877
# - Total execution time (Milliseconds): 418822.007
# - Time to 95% neuron coverage (Milliseconds): 168180.923
xrandom_1_iter = [89.197, 89.197, 92.860, 94.916, 96.147, 96.147, 96.960, 96.960, 97.821, 98.202, 98.202, 98.574, 98.835, 98.835, 98.835, 98.835, 98.835, 98.835, 98.835, 98.835] # 9 diffs

xrandom_1_iter_2 = [ 90.253, 90.253, 90.253, 93.136, 94.746, 94.746, 94.746, 96.213, 96.213, 96.213, 97.055, 97.689, 97.689, 98.138, 98.138, 98.138, 98.138, 98.138, 98.417, 98.417] # 8 diffs

xrandom_1_iter_3 = [0.000, 0.000, 89.596, 89.596, 92.708, 94.718, 94.718, 94.718, 95.894, 95.894, 95.894, 95.894, 97.015, 97.015, 97.511, 98.159, 98.549, 98.549, 98.549, 98.549] # 8 diffs

xrandom_1_iter_4 = [0.000, 0.000, 0.000, 0.000, 89.427, 92.261, 93.642, 95.431, 96.461, 96.461, 97.228, 97.854, 97.854, 97.854, 98.492, 98.830, 99.092, 99.092, 99.092, 99.092] # 10 diffs

# 1 5 250 20 1 0
xrandom_1_iter_5_th = [0.000, 89.950, 92.180, 92.180, 92.180, 94.130, 94.130, 94.130, 95.711, 95.711, 96.600, 96.600, 96.600, 96.600, 96.600, 97.314, 97.314, 97.314, 97.314, 97.314] # 6 diffs

# HiLight
# - Diffs: 9/20
# - Size: 30x30
# - Blackouts: 20
# - Inner execution time (Milliseconds): 1553.453
# - Total execution time (Milliseconds): 410164.365
# - Time to 95% neuron coverage (Milliseconds): 133030.094
xhilight_1_iter = [89.851, 92.905, 92.905, 92.905, 94.495, 94.495, 95.650, 95.650, 96.673, 97.478, 97.478, 97.478, 97.478, 97.478, 97.478, 98.106, 98.106, 98.106, 98.348, 98.348] # 9 diffs

xhilight_1_iter_2 = [88.872, 88.872, 88.872, 93.034, 94.523, 94.523, 96.008, 96.008, 96.008, 96.008, 96.008, 96.755, 96.755, 96.755, 96.755, 96.755, 96.755, 96.755, 96.755, 97.390] # 6 diffs

xhilight_1_iter_3 = [89.322, 92.735, 92.735, 94.857, 96.061, 96.061, 96.061, 96.061, 96.061, 96.061, 97.077, 97.077, 97.988, 97.988, 97.988, 97.988, 98.281, 98.281, 98.281, 98.281] # 7 diffs

xhilight_1_iter_4 = [90.037, 93.249, 94.857, 94.857, 94.857, 95.978, 95.978, 95.978, 96.702, 96.702, 97.440, 97.440, 97.762, 98.302, 98.605, 98.788, 98.788, 98.788, 98.788, 98.788] # 10 diffs

xhilight_1_iter_size_45 = [89.481, 89.481, 89.481, 89.481, 92.332, 92.332, 94.471, 95.808, 96.665, 97.237, 97.237, 97.237, 98.054, 98.054, 98.573, 98.573, 98.852, 99.041, 99.041, 99.185] # 11 diffs

xhilight_1_iter_size_45_2 = [89.407, 89.407, 92.360, 94.252, 95.694, 95.694, 95.694, 95.694, 95.694, 95.694, 95.694, 95.694, 96.741, 96.741, 97.506, 97.506, 97.506, 97.831, 97.831, 98.353] # 8 diffs, 95 nc = 117792.259

# HiLight, up to 20 blackouts per image
# - Parameters: 1 0.1 250 20 20 0
# - Diffs: 20/20
# - Size: 30x30
# - Blackouts: 59
# - Inner execution time (Milliseconds): 4439.528
# - Total execution time (Milliseconds): 948806.825
# - Time to 95% neuron coverage (Milliseconds): 109054.083
xhilight_20_iter = [90.089, 92.944, 94.467, 95.493, 96.286, 96.865, 97.445, 97.721, 98.093, 98.210, 98.357, 98.541, 98.620, 98.729, 98.907, 99.050, 99.077, 99.147, 99.217, 99.240]

# Baseline Random, up to 20 blackouts per image
# - Parameters: 1 0.1 250 20 20 0
# - Diffs: 20/20
# - Size: 30x30
# - Blackouts: 43
# - Inner execution time (Milliseconds): 18.524
# - Total execution time (Milliseconds): 774004.739
# - Time to 95% neuron coverage (Milliseconds): 200891.911
xrandom_20_iter = [ 88.966, 91.614, 93.410, 94.991, 95.789, 96.615, 97.119, 97.882, 98.090, 98.319, 98.711, 98.809, 98.994, 99.090, 99.160, 99.220, 99.387, 99.464, 99.505, 99.524]

# No Blackouts, baseline for non-modified images
# - Parameters 1 0.1 0 20 1 0
# - Size: 0x0
# - Total execution time (Milliseonds): 417595.27
# - Time to 95% neuron coverage (Milliseconds): 150718.824
no_mod = [0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 89.800, 89.800, 92.655, 94.133, 94.133, 95.522, 95.522, 95.522, 96.993, 97.854, 98.282, 98.282, 98.282, 98.778] # 8 diffs

no_mod_2 = [0.000, 0.000, 89.214, 92.347, 92.347, 94.431, 96.041, 96.041, 96.041, 96.041, 97.055, 97.055, 97.636, 97.636, 97.636, 97.636, 98.153, 98.153, 98.606, 98.606]

no_mod_3 = [90.056, 92.216, 94.341, 94.341, 94.341, 95.582, 95.582, 95.582, 96.422, 96.422, 96.422, 96.422, 97.678, 97.678, 97.678, 97.678, 97.678, 97.678, 98.066, 98.522]

# - TH= 0 does not show an accurate collection of the data and is not useful for any meaningful conclusions

x_axis = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]

# Compute the average neuron coverage for 20 image modification comparison
hilight_avg_values = []
random_avg_values = []
for i in range(20):
	hilight_total_val = hilight_20[i] + hilight_20_run_2[i] + hilight_20_run_3[i] + hilight_20_run_4[i] + hilight_20_run_5[i] + hilight_20_run_6[i]
	random_total_val = random_20[i] + random_20_run_2[i] + random_20_run_3[i] + random_20_run_4[i] + random_20_run_5[i] + random_20_run_6[i] + random_20_run_7[i] + random_20_run_8[i] + random_20_run_9[i] + random_20_run_10[i]
	hilight_avg_val = hilight_total_val / 6
	random_avg_val = random_total_val / 10
	hilight_avg_values.append(hilight_avg_val)
	random_avg_values.append(random_avg_val)

plt.plot(x_axis, hilight_avg_values, label = "HiLight")
plt.plot(x_axis, random_avg_values, label = "Random")
plt.ylabel('Neuron Coverage')
plt.xlabel('Number of Modified Images')
plt.title('DeepXplore "Blackout" Modification on ImageNet')
plt.legend()
plt.show()
